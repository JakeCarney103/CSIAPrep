<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
	<meta name="robots" content="noindex, nofollow">
    <title>CSIA Prep Tool</title>
    <link rel='stylesheet' href='css/style.css'>
</head>
<body>
    <h1>CSIA Prep Tool</h1>
    <form id='main'></form>
	<script src='scripts/masterKey.js'></script>
	
	<!-- Load utility modules first (no dependencies) -->
	<script src='scripts/utils.js'></script>
	<script src='scripts/customQuiz.js'></script>
	<script src='scripts/auth.js'></script>
	<script src='scripts/quizHandler.js'></script>
	<script src='scripts/quizLoader.js'></script>

	<script>
			
			const cacheBuster = Date.now();
			const scriptsToLoad = [];
			window.masterKey.forEach(book => {
			  book.quizDictionary.forEach(quiz => {
				scriptsToLoad.push(`QuizSources/${book.folder}/${quiz.fileName}`);
			  });
			});
			// Always load main script last
			scriptsToLoad.push('scripts/script.js');

			// Load scripts sequentially to ensure dependencies
			function loadScriptSequentially(index = 0) {
			  if (index >= scriptsToLoad.length) return;

			  const script = document.createElement('script');
			  script.src = `${scriptsToLoad[index]}?v=${cacheBuster}`;
			  script.onload = () => loadScriptSequentially(index + 1);
			  document.body.appendChild(script);
			}
			loadScriptSequentially();
	</script>
</body>
</html>